{"type":"entity","name":"prism.core","entityType":"Module","observations":["Type: Module","Path: prism/core/__init__.py","Description: Core imaging physics and algorithms module","Contains: instruments, optics, propagators, measurement_system, patterns, targets, trainers, runner","Primary entry point for PRISM physics simulation"]}
{"type":"entity","name":"prism.core.instruments","entityType":"Module","observations":["Type: Module","Path: prism/core/instruments/__init__.py","Description: Unified instruments API with clean config-based classes","Contains: Telescope, Microscope, Camera, Instrument (base)","Factory function: create_instrument(config)"]}
{"type":"entity","name":"prism.core.propagators","entityType":"Module","observations":["Type: Module","Path: prism/core/propagators/__init__.py","Description: Wave propagation physics engines","Contains: FreeSpacePropagator, FresnelPropagator, FraunhoferPropagator, AngularSpectrumPropagator","Propagator selection based on Fresnel number F = a²/(λz)"]}
{"type":"entity","name":"prism.core.optics","entityType":"Module","observations":["Type: Module","Path: prism/core/optics/__init__.py","Description: Forward models and light propagation","Contains: input_handling, microscope_forward, thin_lens","Handles field validation, FOV consistency, lens calculations"]}
{"type":"entity","name":"prism.models","entityType":"Module","observations":["Type: Module","Path: prism/models/__init__.py","Description: Neural network architectures for progressive reconstruction","Contains: ProgressiveDecoder, LossAggregator, custom layers","Key files: networks.py (31KB), losses.py (48KB), layers.py (21KB)"]}
{"type":"entity","name":"prism.config","entityType":"Module","observations":["Type: Module","Path: prism/config/__init__.py","Description: Configuration system with presets and validation","Contains: base.py (dataclasses), presets.py, constants.py, validation.py","Hierarchy: CLI args > Config file > Preset > Scenario > Defaults"]}
{"type":"entity","name":"prism.scenarios","entityType":"Module","observations":["Type: Module","Path: prism/scenarios/__init__.py","Description: High-level scenario builders for real-world setups","Contains: MicroscopeScenarioConfig, DroneScenarioConfig, builders","Function: get_scenario_preset() for loading predefined scenarios"]}
{"type":"entity","name":"prism.visualization","entityType":"Module","observations":["Type: Module","Path: prism/visualization/__init__.py","Description: Modern class-based visualization system","Contains: plotters/, components/, animation.py, style/","Presets: PUBLICATION, PRESENTATION, DASHBOARD, INTERACTIVE"]}
{"type":"entity","name":"prism.catalog","entityType":"Module","observations":["Type: Module","Path: prism/catalog/__init__.py","Description: Component catalog system for optical presets","Contains: components/, illumination/, imaging/, targets/","NEW: Not documented in codebase_exploration.md - needs addition"]}
{"type":"entity","name":"prism.analysis","entityType":"Module","observations":["Type: Module","Path: prism/analysis/__init__.py","Description: Image and result analysis utilities","Contains: comparison.py","NEW: Not documented in codebase_exploration.md"]}
{"type":"entity","name":"prism.validation","entityType":"Module","observations":["Type: Module","Path: prism/validation/__init__.py","Description: Runtime validation tools (distinct from tests/)","Contains: baselines.py (25KB)","Purpose: Baseline comparisons and validation metrics"]}
{"type":"entity","name":"prism.utils","entityType":"Module","observations":["Type: Module","Path: prism/utils/__init__.py","Description: Utility functions for transforms, metrics, sampling","Contains: transforms.py, metrics.py, sampling.py, validation_metrics.py, measurement_cache.py"]}
{"type":"entity","name":"Instrument","entityType":"Protocol","observations":["Type: Protocol (Abstract Base Class)","Path: prism/core/instruments/base.py","Description: Abstract base class for all optical instruments","Required methods: forward(), get_aperture(), compute_psf()","Subclasses: Telescope, Microscope, Camera"]}
{"type":"entity","name":"Telescope","entityType":"Class","observations":["Type: Class","Path: prism/core/instruments/telescope.py:45","Description: Unified telescope for astronomical far-field imaging","Inherits from: Instrument","Uses: TelescopeConfig, Grid, FreeSpacePropagator","Key methods: forward(), get_aperture(), compute_psf()"]}
{"type":"entity","name":"Microscope","entityType":"Class","observations":["Type: Class","Path: prism/core/instruments/microscope.py","Description: Near-field microscope with multiple illumination modes","Inherits from: Instrument","Uses: MicroscopeConfig, AngularSpectrumPropagator","Illumination modes: brightfield, darkfield, phase, DIC, custom","Key property: resolution_limit (Abbe limit 0.61λ/NA)"]}
{"type":"entity","name":"Camera","entityType":"Class","observations":["Type: Class","Path: prism/core/instruments/camera.py","Description: General imaging camera with thin lens model","Inherits from: Instrument","Uses: CameraConfig","Supports defocus and depth of field calculations"]}
{"type":"entity","name":"MeasurementSystem","entityType":"Class","observations":["Type: Class","Path: prism/core/measurement_system.py","Description: Progressive imaging with any Instrument","Uses: Instrument, MeasurementSystemConfig","Key methods: measure(), get_coverage(), cache_measurements()","Tracks cumulative aperture mask for synthetic aperture construction","File size: 25KB - fully implemented"]}
{"type":"entity","name":"Grid","entityType":"Class","observations":["Type: Class","Path: prism/core/grid.py","Description: Computational grid for spatial coordinates","Key methods: get_extent(), compute_fourier_grid()","Manages pixel size, field of view, and coordinate systems"]}
{"type":"entity","name":"PRISMRunner","entityType":"Pipeline","observations":["Type: Pipeline","Path: prism/core/runner.py","Description: Main experiment orchestrator for complete PRISM workflow","File size: 29KB","Orchestrates: PRISMTrainer, Telescope, MeasurementSystem, ProgressiveDecoder","Workflow: setup → initialize → progressive_training → checkpoint"]}
{"type":"entity","name":"PRISMTrainer","entityType":"Pipeline","observations":["Type: Pipeline","Path: prism/core/trainers.py","Description: Training loop for progressive reconstruction","File size: 46KB","Uses: MeasurementSystem, ProgressiveDecoder, LossAggregator","Workflow: initialization_phase → progressive_phase → convergence_check"]}
{"type":"entity","name":"ProgressiveDecoder","entityType":"Class","observations":["Type: Class (Neural Network)","Path: prism/models/networks.py","Description: Decoder-only architecture with learnable latent","Inherits from: torch.nn.Module","Architecture: 1x1 → 4x4 → 16x16 → ... → full resolution","Uses ConvTranspose2d layers for upsampling"]}
{"type":"entity","name":"LossAggregator","entityType":"Class","observations":["Type: Class (Neural Network)","Path: prism/models/networks.py","Description: Progressive loss combining old and new measurements","Inherits from: torch.nn.Module","Weighting: 70% old measurements + 30% new measurements","Ensures consistency across all prior constraints"]}
{"type":"entity","name":"Propagator","entityType":"Protocol","observations":["Type: Protocol (Abstract Base Class)","Path: prism/core/propagators/base.py","Description: Base class for all wave propagation engines","Required methods: propagate(), get_transfer_function()","Implementations: FresnelPropagator, FraunhoferPropagator, AngularSpectrumPropagator"]}
{"type":"entity","name":"FreeSpacePropagator","entityType":"Propagator","observations":["Type: Propagator","Path: prism/core/propagators/base.py","Description: Auto-selecting propagator based on Fresnel number","Propagation type: auto-select","Uses: FresnelPropagator, FraunhoferPropagator","Selection: F >> 1 → Fraunhofer, F ~ 1 → Fresnel, F << 1 → AngularSpectrum"]}
{"type":"entity","name":"FresnelPropagator","entityType":"Propagator","observations":["Type: Propagator","Path: prism/core/propagators/fresnel.py:20","Description: Near-field Fresnel diffraction (F ≥ 1)","Propagation type: near-field","Uses convolution-based approach","Best for: intermediate distances"]}
{"type":"entity","name":"FraunhoferPropagator","entityType":"Propagator","observations":["Type: Propagator","Path: prism/core/propagators/fraunhofer.py","Description: Far-field Fraunhofer diffraction (F < 0.1)","Propagation type: far-field","Uses direct FFT-based approach","Best for: telescopes, far-field imaging"]}
{"type":"entity","name":"AngularSpectrumPropagator","entityType":"Propagator","observations":["Type: Propagator","Path: prism/core/propagators/angular_spectrum.py","Description: General-purpose angular spectrum method","Propagation type: general (all distances)","Highest accuracy for near-field","Best for: microscopy"]}
{"type":"entity","name":"TelescopeConfig","entityType":"Config","observations":["Type: Config (dataclass)","Path: prism/core/instruments/telescope.py:15","Description: Configuration for Telescope initialization","Configures: Telescope","Key fields: n_pixels, aperture_radius_pixels, wavelength, pixel_size","Defaults: 1024 pixels, 550nm wavelength"]}
{"type":"entity","name":"MicroscopeConfig","entityType":"Config","observations":["Type: Config (dataclass)","Path: prism/core/instruments/microscope.py","Description: Configuration for Microscope initialization","Configures: Microscope","Key fields: numerical_aperture, magnification, medium_index, wavelength","Defaults: NA=0.9, M=40x, air medium, 550nm","forward_model_regime: 'simplified', 'full', or 'auto'"]}
{"type":"entity","name":"CameraConfig","entityType":"Config","observations":["Type: Config (dataclass)","Path: prism/core/instruments/camera.py","Description: Configuration for Camera initialization","Configures: Camera","Key fields: focal_length, aperture, sensor_size, pixel_pitch"]}
{"type":"entity","name":"MeasurementSystemConfig","entityType":"Config","observations":["Type: Config (dataclass)","Path: prism/core/measurement_system.py","Description: Configuration for MeasurementSystem","Configures: MeasurementSystem","Key fields: n_samples, pattern, sample_diameter_pix","Pattern types: fermat, star, random"]}
{"type":"entity","name":"VisualizationConfig","entityType":"Config","observations":["Type: Config (dataclass)","Path: prism/visualization/config.py","Description: Unified visualization configuration","Configures: All visualization components","Presets: PUBLICATION, PRESENTATION, DASHBOARD, INTERACTIVE"]}
{"type":"entity","name":"MicroscopeScenarioConfig","entityType":"Config","observations":["Type: Config (dataclass)","Path: prism/scenarios/microscopy.py","Description: Microscopy preset configurations (40x, 100x, phase, DIC)","Provides: to_instrument_config(), compute_resolution()","Objective specs: '40x_0.9NA_air', '100x_1.4NA_oil', etc.","Computes: lateral_resolution_nm, axial_resolution_um, field_of_view_um"]}
{"type":"entity","name":"DroneScenarioConfig","entityType":"Config","observations":["Type: Config (dataclass)","Path: prism/scenarios/drone_camera.py","Description: Drone camera presets with GSD calculations","Provides: to_instrument_config(), compute_gsd()","Presets: 'drone_dji_air2s_60m', 'drone_phantom4_120m'","Computes: gsd_cm (Ground Sampling Distance)"]}
{"type":"entity","name":"MicroscopeBuilder","entityType":"Class","observations":["Type: Class (Builder Pattern)","Path: prism/scenarios/microscopy.py","Description: Fluent API for microscopy scenario configuration","Methods: with_objective(), with_illumination(), build()"]}
{"type":"entity","name":"DroneBuilder","entityType":"Class","observations":["Type: Class (Builder Pattern)","Path: prism/scenarios/drone_camera.py","Description: Fluent API for drone camera scenario configuration","Methods: with_altitude(), with_camera(), build()"]}
{"type":"entity","name":"Target","entityType":"Protocol","observations":["Type: Protocol (Abstract Base Class)","Path: prism/core/targets.py","Description: Abstract base for test targets","Required methods: generate()","Subclasses: USAF1951Target, CheckerboardTarget, PointSourceTarget"]}
{"type":"entity","name":"USAF1951Target","entityType":"Class","observations":["Type: Class","Path: prism/core/targets.py","Description: USAF-1951 resolution test target","Uses: USAF1951Config","Groups: -2 to 9, 6 elements per group","Methods: generate(), get_frequency_lp_mm(), get_bar_width_m()"]}
{"type":"entity","name":"USAF1951Config","entityType":"Config","observations":["Type: Config (dataclass)","Path: prism/core/targets.py","Description: Configuration for USAF1951Target","Configures: USAF1951Target","Key fields: size, field_size, groups, margin_ratio","Default margin_ratio: 0.25 (prevents FFT boundary artifacts)"]}
{"type":"entity","name":"CheckerboardTarget","entityType":"Class","observations":["Type: Class","Path: prism/core/targets.py","Description: Checkerboard pattern for GSD validation","Uses uniform spatial frequency","Useful for ground sampling distance verification"]}
{"type":"entity","name":"PointSourceTarget","entityType":"Class","observations":["Type: Class","Path: prism/core/targets.py","Description: Point source for PSF characterization","Uses: PointSourceConfig","Generates delta function for impulse response measurement"]}
{"type":"entity","name":"get_scenario_preset","entityType":"Function","observations":["Type: Function","Path: prism/scenarios/presets.py","Description: Load predefined scenarios by name","Returns: MicroscopeScenarioConfig or DroneScenarioConfig","Examples: get_scenario_preset('microscope_40x_0.9NA_air')","Related: list_scenario_presets(), get_preset_description()"]}
{"type":"entity","name":"ReconstructionComparisonPlotter","entityType":"Class","observations":["Type: Class (Visualization)","Path: prism/visualization/plotters/reconstruction.py","Description: Compare ground truth vs reconstruction","Inherits from: BasePlotter","Methods: plot(), save_figure()"]}
{"type":"entity","name":"LearningCurvesPlotter","entityType":"Class","observations":["Type: Class (Visualization)","Path: prism/visualization/plotters/training.py","Description: Plot training metrics over time","Inherits from: BasePlotter","Shows: loss curves, SSIM, PSNR over epochs"]}
{"type":"entity","name":"SyntheticAperturePlotter","entityType":"Class","observations":["Type: Class (Visualization)","Path: prism/visualization/plotters/kspace.py","Description: Visualize k-space coverage","Inherits from: BasePlotter","Shows cumulative aperture mask and density"]}
{"type":"entity","name":"generate_fermat_spiral","entityType":"Function","observations":["Type: Function","Path: prism/core/patterns.py","Description: Generate Fermat spiral sampling pattern","Returns: List of (x, y) aperture center coordinates","Parameters: n_samples, radius, golden_angle","Best for: uniform k-space coverage"]}
{"type":"entity","name":"generate_star_pattern","entityType":"Function","observations":["Type: Function","Path: prism/core/patterns.py","Description: Generate star-shaped sampling pattern","Returns: List of (x, y) aperture center coordinates","Parameters: n_samples, n_arms, radius"]}
{"type":"entity","name":"create_pattern","entityType":"Function","observations":["Type: Function","Path: prism/core/patterns.py","Description: Factory function for sampling patterns","Returns: Pattern based on type string","Types: 'fermat', 'star', 'random', 'grid'"]}
{"type":"entity","name":"create_usaf_target","entityType":"Function","observations":["Type: Function","Path: prism/core/targets.py","Description: Factory function for USAF-1951 target","Returns: USAF1951Target","Parameters: field_size, resolution, groups, margin_ratio"]}
{"type":"entity","name":"create_instrument","entityType":"Function","observations":["Type: Function","Path: prism/core/instruments/__init__.py","Description: Factory function for creating instruments","Returns: Telescope, Microscope, or Camera based on config type","Parameters: config (InstrumentConfig subclass)"]}
{"type":"entity","name":"create_illumination_source","entityType":"Function","observations":["Type: Function","Path: prism/core/illumination.py","Description: Factory for illumination sources","Returns: IlluminationSource (LED, Laser, Solar)","Parameters: source_type, wavelength, power"]}
{"type":"entity","name":"compute_ssim","entityType":"Function","observations":["Type: Function","Path: prism/utils/metrics.py","Description: Compute Structural Similarity Index","Returns: float (0-1, higher is better)","Parameters: image1, image2"]}
{"type":"entity","name":"compute_psnr","entityType":"Function","observations":["Type: Function","Path: prism/utils/metrics.py","Description: Compute Peak Signal-to-Noise Ratio","Returns: float (dB, higher is better)","Parameters: image1, image2"]}
{"type":"entity","name":"TelescopeAggregator","entityType":"Class","observations":["Type: Class (DEPRECATED)","Path: prism/core/aggregator.py","Description: Legacy measurement aggregator","Uses: Telescope","DEPRECATED: Use MeasurementSystem instead","Kept for backward compatibility"]}
{"type":"entity","name":"PatternLibrary","entityType":"Class","observations":["Type: Class","Path: prism/core/pattern_library.py","Description: Library management for sampling patterns","NEW: Not in original docs - discovered during verification","Methods: register_pattern(), get_pattern(), list_patterns()"]}
{"type":"entity","name":"PatternLoader","entityType":"Class","observations":["Type: Class","Path: prism/core/pattern_loader.py","Description: Load patterns from files (YAML, JSON)","NEW: Not in original docs - discovered during verification","Supports custom pattern definitions"]}
{"type":"entity","name":"ApertureMask","entityType":"Class","observations":["Type: Class","Path: prism/core/apertures.py","Description: Aperture mask management","File size: 27KB","NEW: Not in original docs - discovered during verification","Methods: create_circular(), create_annular(), combine()"]}
{"type":"entity","name":"ConvergenceMonitor","entityType":"Class","observations":["Type: Class","Path: prism/core/convergence.py","Description: Monitor training convergence","File size: 23KB","NEW: Not in original docs - discovered during verification","Tracks: loss threshold, sample success rate, early stopping"]}
{"type":"entity","name":"ePIE","entityType":"Class","observations":["Type: Class (Algorithm)","Path: prism/core/algorithms/epie.py","Description: Error-Reduction Phase Retrieval Iterative Engine","Baseline algorithm for comparison","Classical iterative phase retrieval method"]}
{"type":"entity","name":"PRISM_Metadata","entityType":"Config","observations":["Type: Metadata (Graph Management)","Description: Knowledge graph metadata for PRISM project","Generated: 2024-11-27","Base commit: 18237bad005531d6ba7984722cad2e835edfa907","Total entities: ~45","Total relations: ~60","Schema version: 1.0"]}
{"type":"relation","from":"prism.core","to":"prism.core.instruments","relationType":"contains"}
{"type":"relation","from":"prism.core","to":"prism.core.propagators","relationType":"contains"}
{"type":"relation","from":"prism.core","to":"prism.core.optics","relationType":"contains"}
{"type":"relation","from":"prism.core.instruments","to":"Telescope","relationType":"defines"}
{"type":"relation","from":"prism.core.instruments","to":"Microscope","relationType":"defines"}
{"type":"relation","from":"prism.core.instruments","to":"Camera","relationType":"defines"}
{"type":"relation","from":"prism.core.instruments","to":"Instrument","relationType":"defines"}
{"type":"relation","from":"prism.core.propagators","to":"FreeSpacePropagator","relationType":"defines"}
{"type":"relation","from":"prism.core.propagators","to":"FresnelPropagator","relationType":"defines"}
{"type":"relation","from":"prism.core.propagators","to":"FraunhoferPropagator","relationType":"defines"}
{"type":"relation","from":"prism.core.propagators","to":"AngularSpectrumPropagator","relationType":"defines"}
{"type":"relation","from":"prism.core.propagators","to":"Propagator","relationType":"defines"}
{"type":"relation","from":"Telescope","to":"Instrument","relationType":"inherits_from"}
{"type":"relation","from":"Microscope","to":"Instrument","relationType":"inherits_from"}
{"type":"relation","from":"Camera","to":"Instrument","relationType":"inherits_from"}
{"type":"relation","from":"Telescope","to":"TelescopeConfig","relationType":"uses"}
{"type":"relation","from":"Telescope","to":"Grid","relationType":"uses"}
{"type":"relation","from":"Telescope","to":"FreeSpacePropagator","relationType":"uses"}
{"type":"relation","from":"Microscope","to":"MicroscopeConfig","relationType":"uses"}
{"type":"relation","from":"Microscope","to":"AngularSpectrumPropagator","relationType":"uses"}
{"type":"relation","from":"Camera","to":"CameraConfig","relationType":"uses"}
{"type":"relation","from":"TelescopeConfig","to":"Telescope","relationType":"configures"}
{"type":"relation","from":"MicroscopeConfig","to":"Microscope","relationType":"configures"}
{"type":"relation","from":"CameraConfig","to":"Camera","relationType":"configures"}
{"type":"relation","from":"MeasurementSystemConfig","to":"MeasurementSystem","relationType":"configures"}
{"type":"relation","from":"USAF1951Config","to":"USAF1951Target","relationType":"configures"}
{"type":"relation","from":"VisualizationConfig","to":"ReconstructionComparisonPlotter","relationType":"configures"}
{"type":"relation","from":"VisualizationConfig","to":"LearningCurvesPlotter","relationType":"configures"}
{"type":"relation","from":"VisualizationConfig","to":"SyntheticAperturePlotter","relationType":"configures"}
{"type":"relation","from":"MeasurementSystem","to":"Instrument","relationType":"uses"}
{"type":"relation","from":"MeasurementSystem","to":"MeasurementSystemConfig","relationType":"uses"}
{"type":"relation","from":"MeasurementSystem","to":"ApertureMask","relationType":"uses"}
{"type":"relation","from":"FreeSpacePropagator","to":"FresnelPropagator","relationType":"uses"}
{"type":"relation","from":"FreeSpacePropagator","to":"FraunhoferPropagator","relationType":"uses"}
{"type":"relation","from":"FresnelPropagator","to":"Propagator","relationType":"inherits_from"}
{"type":"relation","from":"FraunhoferPropagator","to":"Propagator","relationType":"inherits_from"}
{"type":"relation","from":"AngularSpectrumPropagator","to":"Propagator","relationType":"inherits_from"}
{"type":"relation","from":"USAF1951Target","to":"Target","relationType":"inherits_from"}
{"type":"relation","from":"CheckerboardTarget","to":"Target","relationType":"inherits_from"}
{"type":"relation","from":"PointSourceTarget","to":"Target","relationType":"inherits_from"}
{"type":"relation","from":"PRISMRunner","to":"PRISMTrainer","relationType":"orchestrates"}
{"type":"relation","from":"PRISMRunner","to":"MeasurementSystem","relationType":"orchestrates"}
{"type":"relation","from":"PRISMRunner","to":"ProgressiveDecoder","relationType":"orchestrates"}
{"type":"relation","from":"PRISMRunner","to":"Telescope","relationType":"uses"}
{"type":"relation","from":"PRISMTrainer","to":"MeasurementSystem","relationType":"uses"}
{"type":"relation","from":"PRISMTrainer","to":"ProgressiveDecoder","relationType":"uses"}
{"type":"relation","from":"PRISMTrainer","to":"LossAggregator","relationType":"uses"}
{"type":"relation","from":"PRISMTrainer","to":"ConvergenceMonitor","relationType":"uses"}
{"type":"relation","from":"MicroscopeScenarioConfig","to":"MicroscopeConfig","relationType":"provides"}
{"type":"relation","from":"DroneScenarioConfig","to":"CameraConfig","relationType":"provides"}
{"type":"relation","from":"MicroscopeBuilder","to":"MicroscopeScenarioConfig","relationType":"builds"}
{"type":"relation","from":"DroneBuilder","to":"DroneScenarioConfig","relationType":"builds"}
{"type":"relation","from":"prism.scenarios","to":"MicroscopeScenarioConfig","relationType":"defines"}
{"type":"relation","from":"prism.scenarios","to":"DroneScenarioConfig","relationType":"defines"}
{"type":"relation","from":"prism.scenarios","to":"get_scenario_preset","relationType":"defines"}
{"type":"relation","from":"prism.models","to":"ProgressiveDecoder","relationType":"defines"}
{"type":"relation","from":"prism.models","to":"LossAggregator","relationType":"defines"}
{"type":"relation","from":"prism.visualization","to":"ReconstructionComparisonPlotter","relationType":"defines"}
{"type":"relation","from":"prism.visualization","to":"LearningCurvesPlotter","relationType":"defines"}
{"type":"relation","from":"prism.visualization","to":"SyntheticAperturePlotter","relationType":"defines"}
