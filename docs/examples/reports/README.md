# PRISM Example Reports

This directory contains example reports generated by the PRISM automated report generation system.

## Available Examples

### example_report.html
A simplified HTML report demonstrating the structure and styling of PRISM reports. This example shows:
- Executive summary with key metrics
- Configuration details in an organized grid layout
- Training history section (placeholder)
- Results visualization section (placeholder)
- Report features and usage examples

**View the report:** Open `example_report.html` in any web browser.

## Generating Your Own Reports

### Single Experiment Report

```bash
# Generate HTML report
prism report runs/experiment --format html

# Generate PDF report (requires weasyprint)
prism report runs/experiment --format pdf --output report.pdf

# Specify output location
prism report runs/experiment --format html --output docs/my_report.html
```

### Multi-Experiment Comparison Report

```bash
# Compare multiple experiments
prism report runs/exp1 runs/exp2 runs/exp3 --format pdf --output comparison.pdf

# Use wildcards to compare all experiments matching a pattern
prism report runs/europa_* --format html
```

### Custom Templates

```bash
# Use a custom Jinja2 template
prism report runs/experiment --template custom_template.html --output custom_report.html
```

## Report Contents

Production reports generated from real experiment data include:

### 1. **Executive Summary**
- Final metrics (loss, SSIM, PSNR)
- Training duration and epochs
- Convergence status
- Best epoch and early stopping information

### 2. **Configuration Details**
- Complete experiment configuration
- Object parameters (wavelength, distance, size)
- Telescope parameters (samples, SNR, pattern)
- Training parameters (epochs, learning rate, optimizer)
- Network architecture details

### 3. **Training History**
- Interactive training curves (loss, SSIM, PSNR vs epoch)
- Convergence analysis
- Learning rate schedule
- Gradient statistics
- Memory usage and GPU utilization

### 4. **Results**
- Ground truth vs reconstruction comparison
- Difference maps with error visualization
- K-space coverage heatmaps
- Sampling pattern visualization
- Region of interest (ROI) comparisons

### 5. **Appendix** (optional)
- Full configuration YAML
- Sample positions table
- Detailed metric history
- Model architecture diagram
- Hardware and environment information

## Report Formats

### HTML Reports
- **Best for:** Interactive exploration, sharing via web
- **Features:**
  - Embedded base64-encoded images
  - Interactive Plotly charts (zoom, pan, hover)
  - Responsive design for mobile/tablet viewing
  - Self-contained single file
  - Custom CSS styling support

### PDF Reports
- **Best for:** Publications, presentations, archival
- **Requirements:** `weasyprint` package
- **Features:**
  - High-DPI figures (300 DPI)
  - Publication-ready formatting
  - Page breaks and print optimization
  - Professional typography

**Install WeasyPrint:**
```bash
uv add weasyprint
```

## Customization

### Custom Templates

Create custom Jinja2 templates in `prism/reporting/templates/` or provide a path to your template:

```html
<!-- custom_template.html -->
<!DOCTYPE html>
<html>
<head>
    <title>{{ experiments[0].name }} - Custom Report</title>
    <link rel="stylesheet" href="custom_styles.css">
</head>
<body>
    <h1>{{ experiments[0].name }}</h1>

    {% for exp in experiments %}
    <div class="experiment">
        <h2>Experiment: {{ exp.name }}</h2>
        <p>Final Loss: {{ "%.4f"|format(exp.metrics.final_loss) }}</p>
        <p>SSIM: {{ "%.4f"|format(exp.metrics.ssim) }}</p>
    </div>
    {% endfor %}
</body>
</html>
```

### Available Template Variables

- `experiments`: List of experiment data dictionaries
- `timestamp`: Report generation timestamp
- `summary`: Summary statistics across experiments
- `figures`: Dictionary of base64-encoded figure images
- `include_appendix`: Boolean flag for appendix inclusion

## Troubleshooting

### PDF Generation Fails

If PDF generation fails, ensure WeasyPrint is installed:

```bash
uv add weasyprint

# Or with pip
pip install weasyprint
```

On some systems, WeasyPrint requires additional system libraries:
```bash
# Ubuntu/Debian
sudo apt-get install python3-cffi python3-brotli libpango-1.0-0 libpangoft2-1.0-0

# macOS (requires Homebrew)
brew install pango
```

### Report Shows "No Data"

Ensure your experiment directory contains:
- `checkpoint.pt` - Experiment checkpoint file
- Valid metrics in the checkpoint

### Figures Not Appearing

If figures don't appear in reports:
1. Check that matplotlib is installed: `uv add matplotlib`
2. Verify checkpoint contains necessary data (reconstruction, ground truth)
3. Check console for error messages during report generation

## Examples from Documentation

See the [UI/UX Upgrade Plan](../../UI_UX_UPGRADE_PLAN.md) for:
- Complete report specification
- Feature requirements
- Testing strategy
- Example workflows

## Related Tools

- **Compare:** `prism compare runs/exp1 runs/exp2` - Terminal-based comparison
- **Inspect:** `prism inspect runs/experiment/checkpoint.pt` - Interactive checkpoint inspector
- **Dashboard:** `prism dashboard` - Real-time web-based monitoring
- **Animate:** `prism animate runs/experiment --output training.mp4` - Training animations

## API Usage

For programmatic report generation:

```python
from pathlib import Path
from prism.reporting.generator import ReportGenerator

# Initialize generator
generator = ReportGenerator(template_dir=Path("prism/reporting/templates"))

# Generate HTML report
generator.generate_html(
    experiment_paths=[Path("runs/experiment1"), Path("runs/experiment2")],
    output_path=Path("report.html")
)

# Generate PDF report
generator.generate_pdf(
    experiment_paths=[Path("runs/experiment")],
    output_path=Path("report.pdf")
)
```

## Contributing

To improve the report generation system:
1. See [CONTRIBUTING.md](../../../CONTRIBUTING.md)
2. Test suite: `uv run pytest tests/test_reporting.py`
3. Submit issues/PRs on GitHub

## Version History

- **v0.3.0** (2025-11-20): Initial automated report generation system
  - HTML and PDF report support
  - Multi-experiment comparison
  - Custom template support
  - Publication-quality figures (300 DPI)
